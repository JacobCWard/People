<link rel="import" href="/People/sys/gravatar-img/gravatar-img.html" />
<script src="/People/sys/spark-md5/spark-md5.js"></script>
<link rel="import" href="/sys/puppet-redirect/src/puppet-redirect.html" />
<link rel="stylesheet" href="/css/people.css" />
<template>
    <form class="form-horizontal">
        <div class="control-group">
            <div class="controls">
                <gravatar-img email="{{ Email$ }}" style="min-height: 80px; max-width:80px; min-width:80px;"></gravatar-img>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Company:</label>
            <div class="controls">
                <template if="{{ Companies.length > 0 }}">
                    <select selectedindex="{{ SelectedCompanyIndex$ }}">
                        <template repeat="{{ Companies }}">
                            <option>{{ Organisation.Name }}</option>
                        </template>
                    </select>
                </template>
                <template if="{{ Companies.length == 0 }}">
                    <strong>Please <a href="/launcher/workspace/people/companies/add">Add a Company</a> before adding a Contact</strong>
                </template>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Email:</label>
            <div class="controls">
                <input type='text' value='{{ Email$ }}' placeholder='Email' />
            </div>
            <div class="hints">
                <div>The contact icon will be automatically loaded from <a href="https://en.gravatar.com/" target="_blank">gravatar.com</a></div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">First Name:</label>
            <div class="controls">
                <input type='text' value='{{ Person.FirstName$ }}' placeholder='First Name' />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Last Name:</label>
            <div class="controls">
                <input type='text' value='{{ Person.Surname$ }}' placeholder='Last Name' />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Title:</label>
            <div class="controls">
                <input type='text' value='{{ Title$ }}' placeholder='Title' />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label"></label>
            <div class="controls">
                <button type="button" class="btn btn-primary" onclick="getModel(this).Save$++">Save</button>
                <button type="button" class="btn" onclick="getModel(this).Cancel$++">Cancel</button>
            </div>
        </div>
    </form>

    <link is="puppet-redirect" history url="{{ RedirectUrl$ }}" />
    <div>{{ RedirectUrl$ }}</div>
</template>
