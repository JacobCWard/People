<script src="/People/sys/spark-md5/spark-md5.js"></script>
<link rel="import" href="/sys/puppet-redirect/src/puppet-redirect.html" />
<link rel="import" href="/People/sys/paper-button/paper-button.html" />
<link rel="import" href="/People/sys/paper-dialog/paper-action-dialog.html" />
<link rel="stylesheet" href="/css/people.css" id="lnkPeopleCss" />
<template>
    <div class="people">
        <form class="form-horizontal" id="frmContact">
            <div class="control-group">
                <label class="control-label">Company:</label>
                <div class="controls">
                    <template if="{{ Companies.length > 0 }}">
                        <select selectedindex="{{ SelectedCompanyIndex$ }}">
                            <template repeat="{{ Companies }}">
                                <option>{{ Organization.Name }}</option>
                            </template>
                        </select>
                    </template>
                    <template if="{{ Companies.length == 0 }}">
                        <strong>Please <a href="/launcher/workspace/people/companies/add">Add a Company</a> before adding a Contact</strong>
                    </template>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">First Name:</label>
                <div class="controls">
                    <input type='text' value='{{ Person.FirstName$ }}' placeholder='First Name' />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Last Name:</label>
                <div class="controls">
                    <input type='text' value='{{ Person.Surname$ }}' placeholder='Last Name' />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Title:</label>
                <div class="controls">
                    <input type='text' value='{{ Title$ }}' placeholder='Title' />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Details:</label>
                <div class="controls">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Role</th>
                                <th>Value</th>
                                <th>Comment</th>
                                <th>Default</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <template repeat="{{info in Infos}}">
                                <tr>
                                    <td>
                                        <select selectedindex="{{ info.SelectedContactInfoTypeIndex$ }}">
                                            <template repeat="{{ ContactInfoTypes }}">
                                                <option>{{ Name }}</option>
                                            </template>
                                        </select>
                                    </td>
                                    <td>
                                        <select selectedindex="{{ info.SelectedContactInfoRoleIndex$ }}">
                                            <template repeat="{{ ContactInfoRoles }}">
                                                <option>{{ Name }}</option>
                                            </template>
                                        </select>
                                    </td>
                                    <td>
                                        <input type="text" value="{{info.Value$}}" />
                                    </td>
                                    <td>
                                        <input type="text" value="{{info.Comment$}}" />
                                    </td>
                                    <td>
                                        <input type="checkbox" checked="{{info.Default$}}" />
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-small" onclick="getModel(this).info.Delete$++">Delete</button>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"></label>
                <div class="controls">
                    <button type="button" class="btn btn-primary" onclick="getModel(this).Save$++">Save</button>
                    <button type="button" class="btn" onclick="getModel(this).Cancel$++">Cancel</button>
                    <button type="button" class="btn" onclick="getModel(this).AddInfo$++">Add details</button>
                </div>
            </div>
        </form>
        <paper-action-dialog heading="Confirmation" backdrop="true" layered="true" role="dialog" opened="{{Confirm.Message != null && Confirm.Message != ''}}">
            <p>{{Confirm.Message}}</p>
            <paper-button style="color:red;" affirmative role="button" tabindex="1" onclick="getModel(document.getElementById('frmContact')).Confirm.Ok$++">Accept</paper-button>
            <paper-button style="color:green;" affirmative role="button" tabindex="0" onclick="getModel(document.getElementById('frmContact')).Confirm.Reject$++">Decline</paper-button>
        </paper-action-dialog>
    </div>
    <link is="puppet-redirect" history url="{{ RedirectUrl$ }}" />
</template>
