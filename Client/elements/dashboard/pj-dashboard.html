<link rel="import" href="../../vendor/polymer/polymer.html">
<link rel="import" href="../../vendor/polymer-ui-icon/polymer-ui-icon.html" />
<link rel="import" href="../../vendor/polymer-ui-icon-button/polymer-ui-icon-button.html" />
<link rel="import" href="../../vendor/polymer-ui-menu-button/polymer-ui-menu-button.html" />
<link rel="import" href="../../vendor/polymer-ui-menu-item/polymer-ui-menu-item.html" />
<link rel="import" href="../../vendor/polymer-ui-dropdown/polymer-ui-dropdown.html" />
<link rel="import" href="../../vendor/polymer-ui-field/polymer-ui-field.html">
<link rel="import" href="../../vendor/polymer-ui-toolbar/polymer-ui-toolbar.html">
<link rel="import" href="../../vendor/polymer-ui-sidebar/polymer-ui-sidebar.html">
<link rel="import" href="../../vendor/polymer-ui-toggle-button/polymer-ui-toggle-button.html">

<link rel="import" href="../../vendor/polymer-flex-layout/polymer-flex-layout.html">

<polymer-element name="pj-dashboard" attributes="data search">
<template>
  <!-- <link rel="stylesheet" href="pj-dashboard.css"> -->
  <style>
    :host {
      display: flex;
    }

    #container {
      display: flex;
      display: -webkit-flex;

      -webkit-flex-direction: column;
      flex-direction: column;

      -webkit-flex: 1 1 auto;
      flex: 1 1 auto;
    }

    polymer-ui-toolbar {
      -webkit-flex: 1 1 auto;
      flex: 1 1 auto;
    }

    #top {
      display: flex;
      display: -webkit-flex;

      -webkit-flex-direction: column;
      flex-direction: column;

      -webkit-flex: 0 1 auto;
      flex: 0 1 auto;

      z-index: 100;
    }

    #main {
      display: flex;
      display: -webkit-flex;

      -webkit-flex: 1 1 auto;
      flex: 1 1 auto;

      -webkit-flex-direction: row;
      flex-direction: row;
    }


    polymer-ui-toolbar polymer-ui-field{
        width:  100%;
    }

    polymer-ui-toolbar polymer-ui-field:active{
        border-color:  rgb(0, 136, 204);
    }
    polymer-ui-toolbar polymer-ui-field:focus,
    polymer-ui-toolbar polymer-ui-field:hover,
    polymer-ui-toolbar polymer-ui-field:has(:focus){
        background-color:  #fff;
    }


    polymer-ui-toolbar > polymer-ui-icon-button:hover::shadow polymer-ui-icon {
        transition: -webkit-transform 1s;
        transition: transform 1s;
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
    }

    polymer-ui-toggle-button{
        margin-top: 5px;
        margin-left: 10px;
        margin-right: 5px;
    }

    polymer-ui-field label {
        margin-left: 5px;
        margin-right: 10px;
    }

    polymer-ui-sidebar {
        box-shadow:none;
    }

    #filters{
        -webkit-flex: 0 1 auto;
        flex: 0 1 auto;
        border-left: 1px solid #ddd;
    }

    #elementSettings {
        box-sizing:border-box;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;

        padding:10px 20px;

        background-color: #eee;
    }

    #homeIcon {
      width: 19px;
      height: 19px;
      margin: 0px 10px 2px 18px;
    }

  </style>
  <link rel="stylesheet" href="launcher-toolbar.css">

    <div id="container">

        <div id="top">
        <polymer-ui-toolbar   theme="launcher-theme" class="launcher-theme" defaulttheme="polymer-ui-light-theme">
            <a href="/"><img id="homeIcon" src="/images/elusive-iconfont/dev/icons-svg/home.svg"></a>
            <polymer-ui-field class="launcher-theme">
                <polymer-ui-icon icon="search"></polymer-ui-icon>
                <input placeholder="Search" value="{{search}}" update-on="input"/>
            </polymer-ui-field>


            <content select=".pj-launcher-user"></content>

            <!--<polymer-ui-icon-button id="account" icon="account"></polymer-ui-icon-button>-->
            <polymer-ui-icon-button id="settings" icon="settings" on-click="{{toggleEditingMode}}"></polymer-ui-icon-button>
        </polymer-ui-toolbar>
       
<!--        <polymer-ui-dropdown id="dropdown">
            <polymer-ui-menu-item icon="settings">Settings</polymer-ui-menu-item>
            <polymer-ui-menu-item icon="close">Log out</polymer-ui-menu-item>
        </polymer-ui-dropdown>-->

        <template if="{{editingMode}}">
          <div id="elementSettings">
            <juicy-tile-editor selectionMode watchedTagNames="['JUICY-TILE-LIST', 'JUICY-TILE-GRID']"></juicy-tile-editor>
          </div>
        </template>

        </div>

        <div id="main">
            <content></content>

            <polymer-ui-sidebar selected="0" id="filters" label="Filter" class="column"  multi="true">
                <template if="{{ data }}">
                    <template repeat="{{ item, index in data.filters }}">
                        <polymer-ui-field class="align-center">
                            <polymer-ui-toggle-button class="on" value="" offCaption="Hide" onCaption="Show"></polymer-ui-toggle-button>
                            <label>{{item.desc}}</label>
                        </polymer-ui-field>
                   </template>
                </template>
            </polymer-ui-sidebar>

        </div>
    </div>

</template>
<script>
    Polymer('pj-dashboard', {
        data: null,
        editingMode: false,

        ready: function () {
            console.info("dataChanged", this, arguments)
            this.data = this.data ||
            {
                "filters": [
                    {
                        "desc": "Store"
                    }, {
                        "desc": "SuperCRM"
                    }, {
                        "desc": "Skype"
                    }
                ]
            };

            //this.$.account.addEventListener('tap', function () {
            //    this.$.dropdown.toggle();
            //}.bind(this));

        },
        toggleEditingMode: function(){
          this.editingMode = !this.editingMode;          
        }


    });
</script>
</polymer-element>

